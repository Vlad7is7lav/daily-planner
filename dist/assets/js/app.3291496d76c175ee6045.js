!function(){var e,t={751:function(e,t,i){"use strict";function s(e,t,i){let s=document.createElement(e);for(let e in t)s[e]=t[e];return"input"==e&"text"==t.type&&(s.setAttribute("required",!0),s.setAttribute("maxlength",40)),i&&("input"==e?s.value=i:s.textContent=i),s}let a=document.getElementById("canvas"),l=document.getElementById("circle");a.width=270,a.height=270,[l.width,l.height]=[270,270];var n=a.getContext("2d"),r=l.getContext("2d");n.strokeStyle=r.strokeStyle="#5f8087",n.lineCap="round",n.shadowBlur=r.shadowBlur=6,n.shadowColor=r.shadowColor="#d2f4fb";var o=135,d=135;function c(e){return e*(Math.PI/180)}function u(e,t){t&&(e.checked=!1);let i=document.querySelectorAll("section.active .tabs_content_list_item");if(0==i.length)return;let s=document.getElementById("active");if(1==s.checked&&(s.checked=!1),1==e.checked)for(let e of i)"line-through"!=e.querySelector(".label").style.textDecoration?e.classList.add("none"):(e.style.display="",e.classList.remove("none"));else for(let e of i)e.classList.remove("none")}function h(e,t){t&&(e.checked=!1);let i=document.querySelectorAll("section.active .tabs_content_list_item");if(0==i.length)return;let s=document.getElementById("completed");if(1==s.checked&&(s.checked=!1),1==e.checked)for(let e of i)"line-through"==e.querySelector(".label").style.textDecoration?e.classList.add("none"):(e.style.display="",e.classList.remove("none"));else for(let e of i)e.classList.remove("none")}!function(){let e=new Date,t=e.toString().slice(0,3),i=e.getDate()<10?"0"+e.getDate():e.getDate();r.lineWidth=2,r.beginPath(),r.arc(o,d,110,0,360),r.moveTo(220,o),r.arc(o,d,85,0,360),r.moveTo(195,o),r.arc(o,d,60,0,360),r.stroke(),r.fillStyle="#1d71c5",r.font="21px Segoe Print",r.fillText(t,84,159),r.fillText("/",130,159),r.fillText(i,145,159)}(),function e(){let t=new Date,i=(t.getFullYear(),t.getDate(),t.getHours()%12),s=t.getHours(),l=t.getMinutes(),u=c(.6*(t.getSeconds()+t.getMilliseconds()/1e3).toFixed(1)/.1-90).toFixed(6),h=c(6*l-90),m=c(30*i+.5*l-90),g=110*Math.cos(u),p=110*Math.sin(u),v=85*Math.cos(h),f=85*Math.sin(h),b=60*Math.cos(m),y=60*Math.sin(m);n.clearRect(0,0,a.width,a.width),r.setLineDash([0,0]),n.lineWidth=6,n.beginPath(),n.fillStyle="#5f8087",n.arc(o+g,d+p,4,0,360),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.arc(o+v,d+f,7,0,360),n.stroke(),n.fill(),n.beginPath(),n.arc(o+b,d+y,9,0,360),n.stroke(),n.fill(),n.beginPath(),n.arc(o,o,1,0,360),n.stroke(),n.fillStyle="#1d71c5",n.font="21px Segoe Print",l<10&&(l="0"+l),s<10&&(s="0"+s),n.fillText(s+":"+l,101,123),window.requestAnimationFrame(e)}(),function(){let e=document.querySelector(".weatherAPI_grad"),t=document.getElementById("city_name");function i(){let i=new XMLHttpRequest,s=`https://api.openweathermap.org/data/2.5/weather?q=${t.value}&appid=08376460c140cfb4ce2efbb062ba72c3&units=metric`;i.open("GET",s,!0),i.onload=function(){if(200!=i.status)e.innerHTML="Connection failed. </br> Try Later.",e.style.fontSize="24px",e.style.color="red";else{let t=JSON.parse(i.responseText);e.style.fontSize="70px",e.style.color="#5f8087",e.innerText=`${t.main.temp}°C`}},i.send(null)}document.getElementById("search-icon"),t.addEventListener("focusout",(e=>{i()})),i()}();var m=(i(900),i(39),i(16),i(559)),g=i.n(m);new class{constructor(e,t){this.model=e,this.view=t,this.data=[],this.isAuth=!1,this.pseudoID=0,this.delay=!1,this.view.on("addToDo",this.addToDo.bind(this)),this.view.on("updateItem",this.updateItem.bind(this)),this.view.on("deleteItem",this.deleteItem.bind(this)),this.view.on("updateCompState",this.updateCompState.bind(this)),this.view.on("getAllData",this.getAllData.bind(this)),this.view.on("checkDataM",this.checkDataM.bind(this)),this.view.on("getNeededData",this.getNeededData.bind(this)),this.view.on("checkDataToOpen",this.checkDataToOpen.bind(this)),this.view.on("deleteList",this.deleteList.bind(this)),this.view.on("loginUser",this.loginUser.bind(this)),this.view.on("logoutUser",this.logoutUser.bind(this)),this.view.on("registerUser",this.registerUser.bind(this)),this.view.on("auth",this.auth.bind(this))}async auth(){let e=await this.model.userAuth();this.isAuth=e.auth,e.auth&&this.view.showLoginMessage(0);let t=new Date;this.view.changeDate(t.getFullYear(),t.getMonth())}checkDataM(e,t,i){const s=this.model.getTaskList(e,t,1);s&&this.view.hCreateTab(i,t,s)}getNeededData(e){const t=this.model.getTaskList(e);this.view.getArray(t,e)}async addToDo(e,t,i){let s;if("null"==e._id){if(!this.isAuth)return this.data.push({_id:++this.pseudoID,date:e.date,listName:e.name,todos:[{item:e.item,complete:e.complete}]}),this.view.setID(this.pseudoID),void console.log(this.data);s=await this.model.addList({date:e.date,listName:e.name,todos:{item:e.item,complete:e.complete}}),this.data.push(s.data),this.view.setID(s.data._id),"FOCUSOUT"!==t&&"CTRLENTER"!==t&&this.view.createItem()}else{if(this.data.find((t=>t._id==e._id)).todos.push({item:e.item,complete:e.complete}),!this.isAuth)return;s=await this.model.addTask({_id:e._id,date:e.date,listName:e.name,todos:{item:e.item,complete:e.complete}}),"FOCUSOUT"!==t&&"CTRLENTER"!==t&&this.view.createItem()}}async updateItem(e,t){if(await this.model.updateItem({_id:e._id,todos:{item:e.item,complete:e.complete},index:e.index}),this.data.find((t=>t._id==e._id)).todos[e.index]={item:e.item,complete:e.complete},void 0!==t)return this.view.updateItem(t),this.data}updateCompState(e,t){this.model.getTaskList(e.id,e.name)&&this.model.updateComp({id:e.id,name:e.name,index:e.index,completed:e.complete})}async deleteItem(e,t){const i=await this.model.deleteItem({_id:e._id,index:e.index});this.view.deleteItem(t),console.log(i),0===i.data.todos.length&&this.view.deleteList(e),this.data.find((t=>t._id==e._id)).todos.splice(e.index,1),console.log(this.data)}async deleteList(e,t){let i=await this.model.getList(e);!0===i.success&&await this.model.deleteList(e);let s=this.data.findIndex((t=>t._id===e._id));~s&&this.data.splice(s,1),console.log(this.data),this.view.removeCircle(i.data.date)}checkDataToOpen(e,t){const i=this.data.filter((t=>t.date==e));return i&&this.view.hSelectList(t,i),null}async getAllData(e,t){let i=`${e}-${t}`,s=await this.model.getAllData();this.data=s.data,this.isAuth=s.auth;let a=Array.from(this.data,(({date:e})=>e));[...document.querySelectorAll("tbody td")].forEach((e=>{let t=e.getAttribute("data-cell");a.indexOf(`${t}-${i}`)>=0&&(e.classList.add("circleOn"),e.setAttribute("data-task","true"))})),console.log(this.data)}async registerUser(e,t){console.log("registerUser");let i={email:e,password:t},s=await this.model.registerUser(i);if(console.log(s),"duplicate"==s.message)return this.view.showRegisterMessage(1);this.view.showRegisterMessage(0)}async loginUser(e,t){let i={email:e,password:t};if(0==(await this.model.loginUser(i)).auth)return this.view.showLoginMessage(1);this.view.showLoginMessage(0)}async logoutUser(e,t){await this.model.logoutUser(),this.data=[],this.view.reRender(),this.view.showLoginMessage(2,e,t)}}(new class{constructor(e=[]){this.state=e,this.db=null}getTaskList(e,t,i){if(0===i&&!t)return this.state.find((t=>t.id==e));if(0===i&&t)return this.state.find((e=>e.name==t));let s=[];if(1===i){let i;return this.state.forEach((s=>{s.id==e&&s.name==t&&(i={item:s.id,name:s.name,tasks:s.tasks})})),i}return this.state.forEach((t=>{t.id==e&&s.push({item:t.id,name:t.name})})),s}async addTaskList(e){return null===e._id?await this.addList(e):(void 0===isObj?this.state.push(e):isObj.tasks.push(e.tasks[0]),e)}updateComp(e){return this.getTaskList(e.id,e.name,0).tasks[e.index].completed=e.completed,this.state}datesFromState(){return Array.from(this.state,(({id:e})=>e))}async getAllData(){const e=await g().get("/lists/all_lists").then((e=>e.data));let{auth:t,data:i}=e;return{auth:t,data:i}}async getList(e){return await g().get(`/lists/list?id=${e._id}`).then((e=>e.data))}async addList(e){return await g().post("/lists/list",e).then((e=>e.data))}async deleteList(e){return await g().delete(`/lists/list?id=${e._id}`)}async addTask(e){return await g().post("/lists//list/add_task",e).then((e=>e.data))}async updateItem(e){return await g().patch("/lists/list/update_item",e).then((e=>e.data))}async deleteItem(e){return await g().patch("/lists/list/del_task",e).then((e=>e.data))}async registerUser(e){return await g().post("/user/register",e).then((e=>e.data))}async loginUser(e){const t=await g().post("/user/login",e).then((e=>e.data));let{auth:i,message:s,userData:a}=t;return{auth:i,message:s,userData:a}}async logoutUser(){const e=await g().get("/user/logout").then((e=>e.data));let{auth:t,logout:i}=e;return{auth:t,logout:i}}async userAuth(e){const t=await g().get("/user/auth").then((e=>e.data));return t.auth||console.log("Please, login first",t.message),t}}([{id:"01.02.2021",name:"Fruit",tasks:[{item:"1",completed:!1},{item:"2",completed:!1},{item:"3",completed:!0},{item:"4",completed:!0}]},{id:"28.02.2021",name:"Travel",tasks:[{item:"1",completed:!0},{item:"2",completed:!0},{item:"3",completed:!0},{item:"4",completed:!0}]},{id:"12.02.2021",name:"Fruit3",tasks:[{item:"5",completed:!0},{item:"6",completed:!1},{item:"7",completed:!1},{item:"8",completed:!1}]},{id:"12.02.2021",name:"Fruit",tasks:[{item:"9",completed:!1},{item:"10",completed:!1},{item:"11",completed:!0},{item:"12",completed:!1}]}]),new class extends class{constructor(){this.events={}}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}emit(e,...t){this.events[e]&&this.events[e].forEach((e=>e(t[0],t[1])))}}{constructor(){super(),this.selectYear=document.querySelector(".selectYear"),this.selectMonth=document.querySelector(".selectMonth"),this.calendarBlock=document.querySelector(".calendarBlock"),this.flag=0,this.months=["January","Febriary","March","April","May","June","July","August","September","October","November","December"],this.tabs=0,this.varsObject={},this.date="",this.eventListeners=null,this.editFlag=!1,this.currentElem=null,this.initilise(),this.tempData,this.currentName,this.popupModal={overlay:document.querySelector(".overlay"),goButton:document.getElementById("go"),cancelButton:document.getElementById("cancel"),popupInput:document.getElementById("popupInput")}}initilise(){this.onload(),this.addEventListeners()}onload(){this.varsObject.calendarDate_year=document.querySelector(".calendarDate_year"),this.varsObject.calendarDate_month=document.querySelector(".calendarDate_month"),window.onload=()=>{this.emit("auth")}}addEventListeners(){document.addEventListener("click",this.closeSelected.bind(this)),document.querySelector(".closeForm").addEventListener("click",this.closeLoginForm.bind(this));const e=document.getElementById("form-sign-in");e.addEventListener("submit",(t=>this.loginUser(t,e.lastElementChild)));const t=document.getElementById("form-sign-up");t.addEventListener("submit",(e=>this.registerUser(e,t.lastElementChild))),document.querySelector(".login").addEventListener("click",this.openLoginForm.bind(this,e.lastElementChild,t.lastElementChild)),document.querySelector(".tabs").addEventListener("click",this.changeTab.bind(this));let i=document.getElementById("completed"),s=document.getElementById("active");s.addEventListener("change",(()=>h(s))),i.addEventListener("change",(()=>u(i))),this.varsObject.calendarDate_year.addEventListener("click",this.openSelectYear.bind(this)),this.varsObject.calendarDate_month.addEventListener("click",this.openSelectMonth.bind(this));const a=document.querySelector("table");a.addEventListener("mouseover",this.tableMouseOver.bind(this)),a.addEventListener("mouseout",this.tableMouseOut.bind(this))}openLoginForm(e,t){e.disabled=!1,t.disabled=!1;const i=document.querySelector(".logreg"),s=document.querySelector(".button1"),a=document.querySelector(".button2"),l=document.querySelectorAll(".back"),n=document.querySelector(".wrapper");if(s.addEventListener("click",this.openSignInForm.bind(this,n)),a.addEventListener("click",this.openSignUpForm.bind(this,n)),Array.prototype.slice.call(l).forEach((e=>{e.addEventListener("click",this.backToMain.bind(this,n))})),i.classList.contains("showLoginForm"))return this.closeLoginForm();i.classList.add("showLoginForm")}closeLoginForm(){document.querySelector(".logreg").classList.remove("showLoginForm")}openSignInForm(e){e.style.marginLeft="0px"}openSignUpForm(e){e.style.marginLeft="-1000px"}backToMain(e){e.style.marginLeft="-500px"}registerUser(e,t){e.preventDefault();const i=document.querySelector("#email-up"),s=document.querySelector("#password-up");if(!i.value||!s.value||s.value.length<8)return alert("Заполните все поля");this.emit("registerUser",i.value,s.value)}showRegisterMessage(e){switch(e){case 1:let e=document.querySelector(".wrapper-sign_up"),t=document.createElement("div");t.classList.add("registerFalse"),t.innerHTML="Sorry, this login email already exists",e.append(t),setTimeout((()=>{e.lastElementChild.remove()}),1500);break;case 0:let i=document.querySelector(".wrapper-sign_up"),s=document.createElement("div");s.classList.add("registerTrue"),s.innerHTML="Congratulation! </br> Use your login and pass to sign in!",i.append(s);const a=document.querySelector(".wrapper");setTimeout((()=>{i.lastElementChild.remove(),this.openSignInForm(a)}),1500)}}showLoginMessage(e,t,i){switch(e){case 1:let e=document.querySelector(".wrapper-sign_in"),s=document.createElement("div");s.classList.add("loginFalse"),s.innerHTML="You have entered an invalid email or password",e.append(s),setTimeout((()=>{}),2e3);break;case 0:let a=document.querySelector(".wrapper-sign_in"),l=document.createElement("div");l.classList.add("loginTrue"),l.innerHTML="You are logged in.",a.append(l),document.querySelector(".wrapper");let n=new Date;setTimeout((()=>{a.lastElementChild.remove(),this.closeLoginForm(),this.openExitForm(),this.changeDate(n.getFullYear(),n.getMonth()),this.reRender()}),1e3);break;case 2:i.replaceWith(t)}}openExitForm(){const e=document.querySelector(".login");let t=document.createElement("div");t.classList.add("login"),t.innerHTML='<i class="fas fa-sign-out-alt" style="margin-right: 5px;"></i> Выход',t.addEventListener("click",this.logoutUser.bind(this,e,t)),e.replaceWith(t)}loginUser(e,t){e.preventDefault();const i=document.querySelector("#email-in"),s=document.querySelector("#password-in");if(!i.value||!s.value||s.value.length<8)return alert("Заполните все поля");t.disabled=!0,this.emit("loginUser",i.value,s.value)}logoutUser(e,t){this.emit("logoutUser",e,t)}reRender(){let e=new Date;this.changeDate(e.getFullYear(),e.getMonth());let t=document.querySelector(".tabs");t.textContent="",t.nextElementSibling.textContent=""}tableMouseOver(e){if(this.currentElem)return;const t=e.target.closest("td");t&&(this.currentElem=t,""!=t.textContent&&this.showPlus(e))}tableMouseOut(e){if(!this.currentElem)return;let t=e.relatedTarget;if("TD"!=e.target.tagName||""!=e.target.textContent){for(;t;){if(t==this.currentElem)return;t=t.parentNode}this.hidePlus(e),this.currentElem=null}}showPlus(e){let t=document.createElement("I");t.className="fas fa-plus-circle showPlus",e.target.appendChild(t);let i=t.addEventListener("click",this.addNameForTab.bind(this,e));t.removeEventListener("click",i)}addNameForTab(e){let t=e.target.innerText,i=this.date;console.log(i),t<10&&(t="0"+t),this.date.length>7&&(i=this.date.slice(3)),i=`${t}-${i}`,this.emit("getNeededData",i)}getArray(e,t){if(this.tempData=e,!(e.length<3))return console.log("Max tasks for day is 3");{let{overlay:i,goButton:s,cancelButton:a,popupInput:l}=this.popupModal;i.classList.add("showModal"),s.onclick=()=>{if(!this.checkName(l.value,e))return l.placeholder=`${l.value} is already use`,void(l.value="");i.classList.remove("showModal"),this.date=t,this.hCreateTab(this.date,l.value),this.currentName=l.value,setTimeout((()=>{l.value="",l.placeholder="Enter the list name"}),1e3)},a.onclick=()=>{i.classList.remove("showModal")}}}checkName(e,t){return!!e&&t.every((t=>t.name!=e))}hidePlus(e){"I"!=e.target.tagName?null!=e.target.firstElementChild&&"I"==e.target.firstElementChild.tagName&&e.target.firstElementChild.remove():e.target.remove()}openSelectYear(e){this.selectYear.classList.toggle("beVisible"),this.selectMonth.classList.remove("beVisible"),this.flag=1}openSelectMonth(e){this.selectMonth.classList.toggle("beVisible"),this.selectYear.classList.remove("beVisible"),this.flag=1}closeSelected(e){let t,i=e.target,s=this.varsObject.calendarDate_year,a=this.varsObject.calendarDate_month;1==this.flag&&("cells"==i.className?(this.selectYear.classList.remove("beVisible"),s.innerText=i.innerText,t=a.getAttribute("data-month"),this.changeDate(s.innerText,t),this.flag=0):"cellsM"==i.className?(this.selectMonth.classList.remove("beVisible"),t=i.getAttribute("data-month"),a.innerText=this.months[t],this.changeDate(s.innerText,t),this.flag=0):i.className!=s.className&&i.className!=a.className&&(this.selectYear.classList.remove("beVisible"),this.selectMonth.classList.remove("beVisible"),this.flag=0))}changeDate(e,t){let i=document.getElementById("days");const s=function(e,t){let i=new Date(e,t,32),s=new Date(e,t).getDay(),a=32-i.getDate(),l=(new Date(e,t,32).getDate(),"<tr>"),n=1;for(let e=1;e<=s;e++)l+="<td></td>",n++;for(let e=1;e<=a;e++)n>7&&(l+="</tr><tr>",n=1),l+=`<td data-cell=${e>9?"":0}${e}> ${e} </td>`,n++;for(let e=n;e<=7;e++)l+="<td></td>",n++;return l+="</tr>",l}(e,t);i.innerHTML=s,this.varsObject.calendarDate_month.setAttribute("data-month",t),this.varsObject.calendarDate_month.innerText=this.months[t],this.varsObject.calendarDate_year.innerText=e;let a=[...document.querySelectorAll("tbody td")];t<9?t="0"+(+t+1):t+=1;for(let i of a)i.getAttribute("data-cell")&&i.addEventListener("click",this.checkDayTask.bind(this,e,t));this.emit("getAllData",t,e),this.date=`${t}-${e}`;let l=document.querySelector(".lists");for(;l.firstChild;)l.removeChild(l.firstChild)}checkDayTask(e,t,i){if("I"===i.target.tagName)return;let s=i.target.getAttribute("data-cell");this.date=`${s}-${t}-${e}`,this.emit("checkDataToOpen",this.date,i)}hSelectList(e,t){let i=document.querySelector(".calendarDate_year").innerText,a=+document.querySelector(".calendarDate_month").getAttribute("data-month")+1;a<10&&(a="0"+a);const l=`${e.target.getAttribute("data-cell")}-${a}-${i}`,n=document.querySelector(".selectList");n.innerText="";let r=s("div",{className:"lists"});t.forEach(((e,t)=>{let i=s("div",{className:`list list_${t}`}),a=s("span",{},e.listName),n=s("i",{className:"fas fa-times"});i.setAttribute("fullDate",l),i.setAttribute("data-id",e._id),i.appendChild(a),i.appendChild(n),r.appendChild(i),n.addEventListener("click",this.deleteList.bind(this,e)),i.addEventListener("click",this.showList.bind(this,e))})),n.appendChild(r),setTimeout((()=>{r.classList.add("show")}),0)}showList(e,t){"I"!==t.target.tagName&&this.hCreateTab(t,e.listName,e)}deleteList(e,t){this.emit("deleteList",{_id:e._id},t);let i=document.querySelectorAll(".tab");Array.prototype.slice.call(i).forEach(((t,i)=>{t.getAttribute("data-id")!==e._id||this.closeList(null,t.lastElementChild)})),t?t.target.closest(".list").remove():document.querySelector(`div.list[data-id="${e._id}"]`).remove()}removeCircle(e){let t;t="0"==e[0]?e.slice(1,2):e.slice(0,2);let i=[...document.querySelectorAll("tbody td")];for(let e of i)e.innerText===t&&e.classList.remove("circleOn")}hCreateTab(e,t,i){const a=document.querySelectorAll(".tabs_content > section"),l=document.querySelectorAll(".tabs > .tab");let n=Array.from(l);const r=document.getElementById("active");if(u(document.getElementById("completed"),!0),h(r,!0),n.length>0){let e=0;for(let i=0;i<n.length;i++)0==e&&n[i].firstChild.textContent==this.date&&n[i].firstElementChild.textContent==t?(n[i].classList.add("active"),e=1,this.changeTab(null,i)):n[i].classList.remove("active");if(1===e)return}null!=a&&Array.from(a).forEach((function(e){e.classList.remove("active")})),3==this.tabs&&(document.querySelectorAll(".tab")[this.tabs-1].remove(),document.querySelector(".tabs_content").lastElementChild.remove(),this.tabs=2);let o=document.querySelector(".tabs"),d=s("div",{className:"tab active"},this.date),c=s("div",{className:"tabName"},t),m=s("div",{className:"list_delete"});m.innerHTML='<i class="fas fa-times"></i>',m.addEventListener("click",this.closeList.bind(this)),d.append(c),d.append(m),o.insertBefore(d,o.firstElementChild),this.tabs++,this.createSection();const g=document.querySelector("div.tabs > div.active");if(i){g.setAttribute("data-id",i._id);for(let e of i.todos)this.createItem(e)}else g.setAttribute("data-id","null"),this.createItem()}createSection(){const e=document.querySelector(".tabs_content");let t=s("section",{className:"tab_content active"}),i=s("ul",{className:"tabs_content_list"});t.appendChild(i),e.insertBefore(t,e.firstElementChild),null==this.eventListeners&&(document.querySelector(".no-filter.addItem").addEventListener("click",this.hAddItem.bind(this)),this.eventListeners="ACTIVATED")}createItem(e){let t;const i=document.querySelector("section.active > .tabs_content_list");if(i.querySelectorAll("input[type=text]").length>18)return alert("Free version allows you create only 18 tasks");null!=e?t={li:"tabs_content_list_item",label:"label",input:"textfield input_hide"}:(t={li:"tabs_content_list_item",label:"label label_Hide",input:"textfield"},e={item:"",complete:!1});let a=this.getRandomID(5e3),l=s("li",{className:t.li}),n=s("label",{className:"marker"}),r=s("input",{id:a,type:"checkbox",className:"checkbox",name:"check",checked:e.complete}),o=s("div",{className:"itemCheck"}),d=s("label",{className:t.label||"label"},e.item),c=s("input",{type:"text",className:t.input},e.item);l.innerHTML='<div class="item_delete"><i class="fas fa-times"></i></div></li>',!0===e.complete&&(d.style.textDecoration="line-through",d.setAttribute("data-complete",!0)),n.appendChild(r),n.appendChild(o),l.appendChild(n),l.appendChild(d),l.appendChild(c),i.appendChild(l);const u=i.querySelectorAll("input[type=text]");u[u.length-1].focus(),this.todoEventListeners(l)}getRandomID(e){return Math.floor(Math.random()*Math.floor(e))}todoEventListeners(e){const t=e.querySelector("div > i.fas"),i=e.querySelector("input[type=text]"),s=e.querySelector("label.label"),a=e.querySelector("input[type=checkbox]");return e.addEventListener("click",this.editItem.bind(this,i,s)),t.addEventListener("click",this.hdeleteItem.bind(this)),i.addEventListener("keydown",this.hAddItem.bind(this)),i.addEventListener("focusout",this.catch_focusOut.bind(this)),a.addEventListener("click",this.crossItem.bind(this)),e}hdeleteItem(e){e.preventDefault();const t=document.querySelector("div.tabs > div.active").getAttribute("data-id"),i=[...document.querySelectorAll("section.active .item_delete i")];let s=i.indexOf(e.target);this.emit("deleteItem",{_id:t,index:s,date:this.date},e),this.isTask(i,!0)}hupdateItem(e){e.preventDefault();const t=e.target.value,i=this.date,s=document.querySelector("div.tabs > div.active").getAttribute("data-id");let a=[...document.querySelectorAll("section.active input[type=text]")].indexOf(e.target);this.emit("updateItem",{_id:s,date:i,name:this.currentName,item:t,complete:!1,index:a},e)}hupdateCompState(e,t){const i=this.date,s=document.querySelector("div.tabs > div.active").getAttribute("data-id");let a=[...document.querySelectorAll("section.active label.label")].indexOf(e);this.emit("updateItem",{_id:s,date:i,name:this.currentName,item:e.innerText,complete:t,index:a})}hAddToDo(e,t){e.preventDefault();const i=this.date,s=document.querySelector("div.tabs > div.active").getAttribute("data-id"),a=e.target.value;this.emit("addToDo",{_id:s,date:i,name:this.currentName,item:a,complete:!1},t,e),this.isTask(),this.addItem(e)}catch_focusOut(e){if("focusout"==e.type){if(""==e.target.value)return void e.target.parentNode.remove();let t=e.target;t.value=t.value.trim();let i=t.value,s=t.previousElementSibling,a=s.innerText;const l=e.target.closest("ul").querySelectorAll("input").length;if(t.classList.add("input_hide"),s.innerText=i,s.classList.remove("label_Hide"),!0===this.editFlag&&e.target.value!=a)return this.editFlag=!1,void this.hupdateItem(e);if(this.editFlag=!1,l<=1&&""===e.target.value||e.target.value===a)return;this.hAddToDo(e,"FOCUSOUT")}}closeList(e,t){if(null!=t)i=t.closest(".tab");else var i=e.target;const s=i.closest(".tab"),a=[...document.querySelectorAll(".tab")],l=[...document.querySelectorAll(".tab_content")],n=a.indexOf(s);s.classList.contains("active")&&a.length>1&&(n===a.length-1?(s.previousElementSibling.classList.add("active"),l[n-1].classList.add("active")):(s.nextElementSibling.classList.add("active"),l[n+1].classList.add("active"))),s.remove(),l[n].remove(),this.tabs--}addItem(e,t=null){e.target.classList.add("input_hide"),e.target.previousElementSibling.classList.remove("label_Hide")}setID(e){document.querySelector("div.tabs > div.active").setAttribute("data-id",e)}deleteItem(e){let t=e.target;for(;"LI"!=t.tagName;)t=t.parentNode;t.classList.add("none"),setTimeout((()=>{t.remove()}),1e3)}updateItem(e){let t=e.target;t.value=t.value.trim();let i=t.value,s=t.previousElementSibling;t.classList.add("input_hide"),s.innerText=i,s.classList.remove("label_Hide")}isTask(e,t,i){const s=[...document.querySelectorAll("section.active > .tabs_content_list input[type=text]")];let a=[...document.querySelectorAll("tbody td")],l=this.date.slice(0,2);if(s.length>=1&&!t)for(let e of a)e.dataset.cell===l&&e.classList.add("circleOn");else if(s.length<=1)for(let e of a)e.dataset.cell===l&&e.classList.remove("circleOn")}hAddItem(e){let t=e,i=0,s=t.target,a=s.value,l=s.previousElementSibling;if(27==t.keyCode)return s.value=l.innerText,s.classList.add("input_hide"),void l.classList.remove("label_Hide");if(!(13!=t.keyCode&"focusout"!=t.type&"I"!=t.target.tagName)){if(t.ctrlKey&13==t.keyCode){if(!t.target.value)return;return!0===this.editFlag?void this.hupdateItem(t):void(a!=l.innerText?(l.innerText=a.trim(),this.hAddToDo(t,"CTRLENTER")):(s.classList.add("input_hide"),s.previousElementSibling.classList.remove("label_Hide")))}if("click"!=t.type){if(13==t.keyCode){if(t.preventDefault(),!t.target.value)return;const s=document.querySelectorAll("section.active > .tabs_content_list input[type=text]");let a=e.target.value.trim();t.target.value=a,console.log(830,"enter");for(let e of s)if(!this.itemIsEmpty(e))return e.classList.remove("input_hide"),e.previousSibling.classList.add("label_Hide"),void e.focus();return this.itemOut(1),this.createItem(),void(i=1)}}else{if("far fa-plus-square"==t.target.classList){let e=document.querySelectorAll("section.active > .tabs_content_list input[type=text]");if(null===e)return;for(let t of e)if(!this.itemIsEmpty(t))return t.classList.remove("input_hide"),t.previousSibling.classList.add("label_Hide"),void t.focus();if(!document.querySelector("section.active"))return;return void this.createItem()}this.itemIsEmpty()}}}itemOut(e,t){const i=document.querySelectorAll("section.active > .tabs_content_list input[type=text]"),s=i[i.length-e].previousElementSibling,a=i[i.length-e];a.classList.add("input_hide"),s.classList.remove("label_Hide"),s.innerText=i[i.length-e].value,a.blur()}crossItem(e){const t=e.target.closest("li").querySelector("label.label");let i;"line-through"==t.style.textDecoration?(t.style.textDecoration="none",t.removeAttribute("data-complete"),i=!1):(t.style.textDecoration="line-through",t.setAttribute("data-complete","true"),i=!0),this.hupdateCompState(t,i)}editItem(e,t,i){"label"==i.target.className&&(this.editFlag=!0,e.value=t.innerText,e.classList.remove("input_hide"),t.classList.add("label_Hide"),e.focus())}itemIsEmpty(e){return""!=e.value.trim()&&(e.blur(),!0)}changeTab(e,t){let i;console.log(e.target.innerText);const s=document.querySelectorAll(".tabs > .tab"),a=document.querySelectorAll(".tabs_content > .tab_content");if(null==e)return Array.prototype.slice.call(a).forEach((function(e,t){e.classList.remove("active")})),void a[t].classList.add("active");if("tab active"!=e.target.classList&&"tab active"!=e.target.parentNode.classList&&(i=e.target.parentNode.classList.contains("tab")?e.target.parentNode:t||e.target,t&&i.classList.remove("active"),"tab"==i.className)){Array.prototype.slice.call(s).forEach((function(e,t){e.classList.remove("active")})),i.classList.add("active"),this.currentName=i.querySelector(".tabName").innerText;let e=new RegExp("^[0-9]{2}.[0-9]{2}.[1-2][0-9]{3}");this.date=e.exec(i.innerText)[0],Array.prototype.slice.call(a).forEach((function(e,t){e.classList.remove("active")}));for(let e=0;e<s.length;e++)i==s[e]&&a[e].classList.add("active")}}})},137:function(e,t,i){"use strict";i.r(t)},452:function(e,t,i){"use strict";i.r(t)},39:function(e,t,i){var s=i(137);"string"==typeof s&&(s=[[e.id,s,""]]);i(723)(s,{hmr:!0,transform:void 0,insertInto:void 0}),s.locals&&(e.exports=s.locals)},900:function(e,t,i){var s=i(452);"string"==typeof s&&(s=[[e.id,s,""]]);i(723)(s,{hmr:!0,transform:void 0,insertInto:void 0}),s.locals&&(e.exports=s.locals)}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var l=i[e]={id:e,exports:{}};return t[e](l,l.exports,s),l.exports}s.m=t,e=[],s.O=function(t,i,a,l){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],l=e[c][2];for(var r=!0,o=0;o<i.length;o++)(!1&l||n>=l)&&Object.keys(s.O).every((function(e){return s.O[e](i[o])}))?i.splice(o--,1):(r=!1,l<n&&(n=l));if(r){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[i,a,l]},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,l,n=i[0],r=i[1],o=i[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(o)var c=o(s)}for(t&&t(i);d<n.length;d++)l=n[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(c)},i=self.webpackChunktodo_calendar=self.webpackChunktodo_calendar||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var a=s.O(void 0,[216],(function(){return s(751)}));a=s.O(a)}();